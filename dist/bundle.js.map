{"version":3,"file":null,"sources":["../src/TodoMVC.html","../src/app.js"],"sourcesContent":["<header class=\"header\">\n\t<h1>todos</h1>\n\t<input ref:newTodo class=\"new-todo\" on:enter='newTodo(this.value)' placeholder=\"What needs to be done?\" autofocus>\n</header>\n\n{{#if items.length > 0}}\n\t<section class=\"main\">\n\t\t<input class=\"toggle-all\" type=\"checkbox\" on:change='toggleAll(this.checked)' checked='{{numCompleted === items.length}}'>\n\t\t<label for=\"toggle-all\">Mark all as complete</label>\n\n\t\t<ul class=\"todo-list\">\n\t\t\t{{#each items as item, index}}\n\t\t\t\t{{#if filter(item, currentFilter)}}\n\t\t\t\t\t<li class=\"{{ item.completed ? 'completed' : '' }} {{ editing === index ? 'editing' : '' }}\">\n\t\t\t\t\t\t<div class=\"view\">\n\t\t\t\t\t\t\t<input class=\"toggle\" type=\"checkbox\" bind:checked=\"item.completed\">\n\t\t\t\t\t\t\t<label on:dblclick=\"edit(index)\">{{item.description}}</label>\n\t\t\t\t\t\t\t<button on:click=\"remove(index)\" class=\"destroy\"></button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{{#if editing === index}}\n\t\t\t\t\t\t\t<input value='{{item.description}}' id=\"edit\" class=\"edit\" on:enter='blur(this)' on:blur=\"submit(this.value)\" on:escape=\"cancel()\" autofocus>\n\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t</li>\n\t\t\t\t{{/if}}\n\t\t\t{{/each}}\n\t\t</ul>\n\n\t\t<footer class=\"footer\">\n\t\t\t<span class=\"todo-count\">\n\t\t\t\t<strong>{{numActive}}</strong> {{numActive === 1 ? 'item' : 'items'}} left\n\t\t\t</span>\n\n\t\t\t<ul class=\"filters\">\n\t\t\t\t<li><a class=\"{{ currentFilter === 'all' ? 'selected' : '' }}\" href=\"#/\">All</a></li>\n\t\t\t\t<li><a class=\"{{ currentFilter === 'active' ? 'selected' : '' }}\" href=\"#/active\">Active</a></li>\n\t\t\t\t<li><a class=\"{{ currentFilter === 'completed' ? 'selected' : '' }}\" href=\"#/completed\">Completed</a></li>\n\t\t\t</ul>\n\n\t\t\t{{#if numCompleted}}\n\t\t\t\t<button class=\"clear-completed\" on:click=\"clearCompleted()\">\n\t\t\t\t\tClear completed\n\t\t\t\t</button>\n\t\t\t{{/if}}\n\t\t</footer>\n\t</section>\n{{/if}}\n\n<script>\n\tconst ENTER_KEY = 13;\n\tconst ESCAPE_KEY = 27;\n\n\tfunction keyEvent ( code ) {\n\t\treturn function ( node, callback ) {\n\t\t\tfunction keydownHandler ( event ) {\n\t\t\t\tif ( event.which === code ) callback.call( this, event );\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'keydown', keydownHandler, false );\n\n\t\t\treturn {\n\t\t\t\tteardown () {\n\t\t\t\t\tnode.removeEventListener( 'keydown', keydownHandler, false );\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t}\n\n\tlet items;\n\ttry {\n\t\titems = JSON.parse( localStorage.getItem( 'todos-svelte' ) ) || [];\n\t} catch ( err ) {\n\t\titems = [];\n\t}\n\n\texport default {\n\t\tdata: () => ({\n\t\t\tcurrentFilter: 'all',\n\t\t\titems\n\t\t}),\n\n\t\tcomputed: {\n\t\t\tnumActive ( items ) {\n\t\t\t\treturn items.filter( item => !item.completed ).length;\n\t\t\t},\n\n\t\t\tnumCompleted ( items ) {\n\t\t\t\treturn items.filter( item => item.completed ).length;\n\t\t\t}\n\t\t},\n\n\t\thelpers: {\n\t\t\tfilter ( item, currentFilter ) {\n\t\t\t\tif ( currentFilter === 'all' ) return true;\n\t\t\t\tif ( currentFilter === 'completed' ) return item.completed;\n\t\t\t\tif ( currentFilter === 'active' ) return !item.completed;\n\t\t\t}\n\t\t},\n\n\t\tonrender () {\n\t\t\tconst updateView = () => {\n\t\t\t\tlet currentFilter = 'all';\n\t\t\t\tif ( window.location.hash === '#/active' ) {\n\t\t\t\t\tcurrentFilter = 'active';\n\t\t\t\t} else if ( window.location.hash === '#/completed' ) {\n\t\t\t\t\tcurrentFilter = 'completed';\n\t\t\t\t}\n\n\t\t\t\tthis.set({ currentFilter });\n\t\t\t};\n\n\t\t\twindow.addEventListener( 'hashchange', updateView );\n\t\t\tupdateView();\n\n\t\t\tthis.observe( 'items', items => {\n\t\t\t\ttry {\n\t\t\t\t\tlocalStorage.setItem( 'todos-svelte', JSON.stringify( items ) );\n\t\t\t\t} catch ( err ) {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tmethods: {\n\t\t\tblur ( node ) {\n\t\t\t\tnode.blur();\n\t\t\t},\n\n\t\t\tcancel () {\n\t\t\t\tthis.set({ editing: null });\n\t\t\t},\n\n\t\t\tclearCompleted () {\n\t\t\t\tconst items = this.get( 'items' ).filter( item => !item.completed );\n\t\t\t\tthis.set({ items });\n\t\t\t},\n\n\t\t\tedit ( index ) {\n\t\t\t\tthis.set({ editing: index });\n\t\t\t},\n\n\t\t\tnewTodo ( description ) {\n\t\t\t\tconst items = this.get( 'items' );\n\t\t\t\titems.push({\n\t\t\t\t\tdescription,\n\t\t\t\t\tcompleted: false\n\t\t\t\t});\n\n\t\t\t\tthis.set({ items });\n\t\t\t\tthis.refs.newTodo.value = '';\n\t\t\t},\n\n\t\t\tremove ( index ) {\n\t\t\t\tconst items = this.get( 'items' );\n\t\t\t\titems.splice( index, 1 );\n\n\t\t\t\tthis.set({ items });\n\t\t\t},\n\n\t\t\tsubmit ( description ) {\n\t\t\t\tconst items = this.get( 'items' );\n\t\t\t\tconst index = this.get( 'editing' );\n\n\t\t\t\titems[ index ].description = description;\n\n\t\t\t\tthis.set({ items, editing: null });\n\t\t\t},\n\n\t\t\ttoggleAll ( checked ) {\n\t\t\t\tconst items = this.get( 'items' );\n\n\t\t\t\titems.forEach( item => {\n\t\t\t\t\titem.completed = checked;\n\t\t\t\t});\n\n\t\t\t\tthis.set({ items });\n\t\t\t}\n\t\t},\n\n\t\tevents: {\n\t\t\tenter: keyEvent( ENTER_KEY ),\n\t\t\tescape: keyEvent( ESCAPE_KEY )\n\t\t}\n\t};\n</script>\n","import createComponent from './TodoMVC.html';\n\nwindow.todomvc = createComponent({\n\ttarget: document.querySelector( '.todoapp' )\n});\n"],"names":["keyEvent","code","node","callback","keydownHandler","event","which","call","this","addEventListener","teardown","removeEventListener","newTodo","value","items","length","toggleAll","checked","numCompleted","root","numActive","currentFilter","clearCompleted","filter","item","edit","index","remove","completed","editing","description","submit","blur","cancel","const","ENTER_KEY","ESCAPE_KEY","JSON","parse","localStorage","getItem","err","data","computed","helpers","onrender","updateView","let","window","location","hash","set","observe","setItem","stringify","methods","get","push","refs","splice","forEach","events","enter","escape","todomvc","createComponent","target","document","querySelector"],"mappings":"wBAoDC,SAASA,GAAWC,GACnB,MAAO,UAAWC,EAAMC,GACvB,QAASC,GAAiBC,GACpBA,EAAMC,QAAUL,GAAOE,EAASI,KAAMC,KAAMH,GAKlD,MAFAH,GAAKO,iBAAkB,UAAWL,GAAgB,IAGjDM,oBACCR,EAAKS,oBAAqB,UAAWP,GAAgB,wVA5DXQ,QAAQJ,KAAKK,mQAGtDC,MAAMC,OAAS,yRAEkCC,UAAUR,KAAKS,89DAAqBC,eAAiBC,EAAAL,yBAIjGA,kLAmBGM,8CAAqC,MAAdA,UAAkB,OAAS,oDAI3CC,qDACAA,wDACAA,8BAGZH,+qBACqCI,seA5BpCC,OAAOC,EAAML,EAAAE,qYAIII,KAAKC,oFACPC,OAAOD,k3BAJbF,EAAKI,UAAY,YAAc,WAASC,UAAYH,EAAQ,UAAY,mIAGjDF,EAAKM,sGAInCD,UAAYH,saACyEK,OAAOvB,KAAKK,iHAAjCmB,KAAKxB,8EAA+CyB,4GAAzGT,0lCA4BtBU,GAmBIpB,GAnBEqB,EAAY,GACZC,EAAa,EAmBnB,KACCtB,EAAQuB,KAAKC,MAAOC,aAAaC,QAAS,qBACzC,MAAQC,GACT3B,KAGDoB,OACCQ,KAAM,kBACLrB,cAAe,MACfP,MAAAA,IAGD6B,UACCvB,mBAAYN,GACX,MAAOA,GAAMS,OAAQ,SAAAC,UAASA,EAAKI,YAAYb,QAGhDG,sBAAeJ,GACd,MAAOA,GAAMS,OAAQ,SAAAC,SAAQA,GAAKI,YAAYb,SAIhD6B,SACCrB,gBAASC,EAAMH,GACd,MAAuB,QAAlBA,IACkB,cAAlBA,EAAuCG,EAAKI,UAC1B,WAAlBP,GAAqCG,EAAKI,UAA/C,UAIFiB,+BACOC,EAAa,WAClBC,GAAI1B,GAAgB,KACU,cAAzB2B,OAAOC,SAASC,KACpB7B,EAAgB,SACoB,gBAAzB2B,OAAOC,SAASC,OAC3B7B,EAAgB,aAGjBb,EAAK2C,KAAM9B,cAAAA,IAGZ2B,QAAOvC,iBAAkB,aAAcqC,GACvCA,IAEAtC,KAAK4C,QAAS,QAAS,SAAAtC,GACtB,IACCyB,aAAac,QAAS,eAAgBhB,KAAKiB,UAAWxC,IACrD,MAAQ2B,QAMZc,SACCvB,cAAO9B,GACNA,EAAK8B,QAGNC,kBACCzB,KAAK2C,KAAMtB,QAAS,QAGrBP,0BACCY,GAAMpB,GAAQN,KAAKgD,IAAK,SAAUjC,OAAQ,SAAAC,UAASA,EAAKI,WACxDpB,MAAK2C,KAAMrC,MAAAA,KAGZW,cAAOC,GACNlB,KAAK2C,KAAMtB,QAASH,KAGrBd,iBAAUkB,GACTI,GAAMpB,GAAQN,KAAKgD,IAAK,QACxB1C,GAAM2C,MACL3B,YAAAA,EACAF,WAAW,IAGZpB,KAAK2C,KAAMrC,MAAAA,IACXN,KAAKkD,KAAK9C,QAAQC,MAAQ,IAG3Bc,gBAASD,GACRQ,GAAMpB,GAAQN,KAAKgD,IAAK,QACxB1C,GAAM6C,OAAQjC,EAAO,GAErBlB,KAAK2C,KAAMrC,MAAAA,KAGZiB,gBAASD,GACRI,GAAMpB,GAAQN,KAAKgD,IAAK,SAClB9B,EAAQlB,KAAKgD,IAAK,UAExB1C,GAAOY,GAAQI,YAAcA,EAE7BtB,KAAK2C,KAAMrC,MAAAA,EAAOe,QAAS,QAG5Bb,mBAAYC,GACXiB,GAAMpB,GAAQN,KAAKgD,IAAK,QAExB1C,GAAM8C,QAAS,SAAApC,GACdA,EAAKI,UAAYX,IAGlBT,KAAK2C,KAAMrC,MAAAA,MAIb+C,QACCC,MAAO9D,EAAUmC,GACjB4B,OAAQ/D,EAAUoC,ICnLrBY,QAAOgB,QAAUC,GAChBC,OAAQC,SAASC,cAAe"}